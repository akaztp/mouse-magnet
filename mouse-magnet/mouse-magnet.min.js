define("mouse-magnet",["jquery","physics"],function(n){return function t(i){"use strict";function s(){var t=this;c(t._physics,t.config.particleSelector,t.elemsPhysics,t.config.attraction,t._mouseParticle);t._physics.onUpdate(function(){l.apply(t,null)});t._physics.play();n("body").mousemove(t,u);n(t.config.boundsSelector).mouseenter(t,f);n(t.config.boundsSelector).mouseleave(t,e);n(window).resize(function(){o.apply(t,null)})}function h(){var n=this;n._physics.toggle();n.elemsPhysics.forEach(function(n){n.elem.css("left","0");n.elem.css("top","0")})}function c(t,i,r,u,f){n(i).each(function(i,e){var o={elem:n(e)};o.pos=o.elem.offset();o.dim={width:o.elem.width(),height:o.elem.height()};o.middlePos={left:o.pos.left+o.dim.width/2,top:o.pos.top+o.dim.height/2};o.dolly=t.makeParticle(1,o.middlePos.left,o.middlePos.top);o.anchor=t.makeParticle(1,o.middlePos.left,o.middlePos.top);o.anchor.makeFixed();o.attraction=t.makeSpring(o.anchor,o.dolly,.5,.5,0);o.repulsion=t.makeAttraction(o.dolly,f,(u?1:-1)*5e4,20);o.repulsion.on=!1;r.push(o)})}function u(n){var t={top:n.pageY,left:n.pageX};n.data._mouseParticle.position.x=t.left;n.data._mouseParticle.position.y=t.top}function f(n){n.data.elemsPhysics.forEach(function(n){n.repulsion.on=!0});n.data._inited=!1}function e(n){n.data.elemsPhysics.forEach(function(n){n.repulsion.on=!1});n.data._inited=!1}function l(){var n=this,t;n.config.lowCpuDetect&&(t=(new Date).getTime(),n._lowCpuData.lastRenderTime||(n._lowCpuData.lastRenderTime=t),t-n._lowCpuData.lastRenderTime>100?n._lowCpuData.detectedCycles++>5&&(n._lowCpuData.detectedCycles=0,n.toggle(),n.config.lowCpuCallback&&n.config.lowCpuCallback()):n._lowCpuData.detectedCycles=0);n.elemsPhysics.forEach(function(n){var t={left:n.dolly.position.x-n.dim.width/2,top:n.dolly.position.y-n.dim.height/2};n.elem.offset(t)});n._lowCpuData.lastRenderTime=t}function o(){var n=this;n.elemsPhysics.forEach(function(n){var t={left:n.dolly.position.x-n.middlePos.left,top:n.dolly.position.y-n.middlePos.top};n.elem.css("left","0").css("top","0");n.pos=n.elem.offset();n.dim={width:n.elem.width(),height:n.elem.height()};n.middlePos={left:n.pos.left+n.dim.width/2,top:n.pos.top+n.dim.height/2};n.dolly.position.x=n.middlePos.left+t.left;n.dolly.position.y=n.middlePos.top+t.top;n.anchor.position.x=n.middlePos.left;n.anchor.position.y=n.middlePos.top;n.anchor.makeFixed()})}function a(t){if(t._inited){var o=n(t.config.particleSelector),r=v(o),i={data:t};f(i);i.pageX=r.left+o.width()/2;i.pageY=r.top+o.height()/2;u(i);window.setTimeout(function(){i.data._inited&&(i.pageX=r.left-1,i.pageY=r.top-1,u(i),e(i),i.data._inited=!0)},200);t._inited=!0}else window.clearInterval(t._pokeInterval)}function v(t){var i=t.offset(),r;return t.each(function(t,u){r=n(u).offset();i.top=(i.top+r.top)/2;i.left=(i.left+r.left)/2}),i}var r=this;r.config=i;r.elemsPhysics=[];typeof r.start!="function"&&(t.prototype.start=s,t.prototype.toggle=h,t.prototype.reposition=o);r._lowCpuData={lastRenderTime:null,detectedCycles:0};r._inited=!0;r._physics=new Physics(0,r.config.drag);r._mouseParticle=r._physics.makeParticle(1,0,0);r._mouseParticle.makeFixed();r._pokeInterval=null;r.config.autoPoke&&(r.pokeInterval=window.setInterval(a,r.config.autoPoke*1e3,r))}});